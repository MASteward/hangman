<!DOCTYPE html>
<html>
	<head>
		<title>Guessing</title>
	</head>
	<body>
		<h1>Western Hangman</h1>
		<h2>Try to guess the word (hint: It western themed words!)</h2>
		<h3>Guesses Remaining: <span id="guesses">10</span></h3>
		<p>Score: <span id="score">0</span></p>
		<h4 id="word"></h4>
		<h4>Letters Guessed: <span id="used"></span></h4>

		<script type="text/javascript">

//======================= VARIABLES =========================================

			var score = 0;
			var guessesLeft = 10;
			var wrongLetters =[];
			var letterSpaces = [];
			var spaceDisplay = [];

			var words = ["horse", "boots", "pistol", "hat", "canteen", "chaps", "rope", "saddle"];

			var letterOption = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];

			//Choose the word for the user to guess
			var answerWord = words[Math.floor(Math.random() * words.length)];

			
			// Breaks apart the answer to the chosen word into an array
			var letterArray = answerWord.split("");
			console.log(letterArray);

			var resetLetterSpaces = function() {
				document.getElementById("word").innerHTML = letterSpaces;
			}

			var resetGuesses = function() {
				document.getElementById("guesses").innerHTML = guessesLeft;
			}

			var resetLettersGuessed = function() {
				document.getElementById("used").innerHTML = wrongLetters;
			}

			var resetScore = function() {
				document.getElementById("score").innerHTML = score;
			}

//=========================== FUNCTIONS ================================================================
			// Creates the display of underscores equal to the amount of letters in the answer.
			
			function wordPrep() {
				console.log(letterSpaces)
				for (i = 0; i < letterArray.length; i++) {
					letterSpaces.push("_");
				}
				spaceDisplay = letterSpaces.join(" ");
				document.getElementById("word").innerHTML = spaceDisplay;
			}

			

			function letterCheck(userGuess) {
				for (i = 0; i < letterArray.length; i++) {
					if (userGuess === letterArray[i]) {
						letterSpaces.splice(i, 1, userGuess);
						gameStatus();
					}
					else if (i === (letterArray.length - 1) && letterArray[i] !== userGuess) {
						wrongLetters.push(userGuess);
						guessesLeft --;
						gameStatus();
					}
				}
			}

			

			// Checks to see if the user has guessed the word or no more guesses
			function gameStatus() {
				document.getElementById("word").innerHTML = letterSpaces.join(" ");
				document.getElementById("used").innerHTML = wrongLetters.join(" ");
				document.getElementById("guesses").innerHTML = guessesLeft;
				console.log("CHECKUP")
				
				if (guessesLeft === 0) {
					document.getElementById("word").innerHTML = "GAME OVER";
					resetGame();
				}
				
				else if (letterSpaces === letterArray) {
					score++;
					alert("You WON!!");
					wordPrep();
				}
			}

// Resets variables back to starting point.
			function resetGame() {
				resetLetters();
				resetLetterSpaces();
				resetLettersGuessed();
			}
				
//============================================================
			wordPrep();	
			function startGame() {
				gameStatus();


				document.onkeyup = function(event) {
					var userGuess = String.fromCharCode(event.keyCode).toLowerCase();
					console.log("HEY", userGuess);
						
					if (letterOption.indexOf(userGuess) !== -1) {
						letterCheck(userGuess);
					}
				}
			}

			wordPrep();
			startGame();


		</script>
	</body>
</html>